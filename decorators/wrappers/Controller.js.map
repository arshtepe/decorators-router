{"version":3,"sources":["../../src/decorators/wrappers/Controller.js"],"names":["_buildHandlers","Symbol","_handlers","Controller","constructor","WrapClass","rootPath","wrapClass","keys","obj","concat","Object","getOwnPropertyNames","getPrototypeOf","forEach","key","wrap","__requestWrapper","setRootPath","push","handlers"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,MAAMA,iBAAiBC,QAAvB;AACA,MAAMC,YAAYD,QAAlB;;AAEe,MAAME,UAAN,CAAiB;AAC5BC,gBAAYC,SAAZ,EAAuBC,WAAW,GAAlC,EAAuC;AACnC,aAAKN,cAAL,EAAqBK,SAArB,EAAgCC,QAAhC;AACH;;AAED,KAACN,cAAD,EAAiBK,SAAjB,EAA4BC,QAA5B,EAAsC;AAClC,cAAMC,YAAY,IAAIF,SAAJ,EAAlB;AACA,YAAIG,OAAO,EAAX;AACA,YAAIC,MAAMF,SAAV;AACA,aAAKL,SAAL,IAAkB,EAAlB;AACA,WAAG;AACCM,mBAAOA,KAAKE,MAAL,CAAYC,OAAOC,mBAAP,CAA2BH,GAA3B,CAAZ,CAAP;AACH,SAFD,QAESA,MAAME,OAAOE,cAAP,CAAsBJ,GAAtB,CAFf;;AAIAD,aAAKM,OAAL,CAAaC,OAAO;AAChB,gBAAIC,OAAOT,UAAUQ,GAAV,EAAeE,gBAA1B;AACA,gBAAI,EAAED,wCAAF,CAAJ,EAAuC;AACnC;AACH;;AAEDA,iBAAKE,WAAL,CAAiBZ,QAAjB;AACA,iBAAKJ,SAAL,EAAgBiB,IAAhB,CAAqBH,IAArB;AACH,SARD;AASH;;AAED,QAAII,QAAJ,GAAe;AACX,eAAO,KAAKlB,SAAL,CAAP;AACH;AA3B2B;kBAAXC,U","file":"Controller.js","sourcesContent":["import path from \"path\";\nimport RequestWrapper from \"../wrappers/RequestWrapper\";\n\nconst _buildHandlers = Symbol();\nconst _handlers = Symbol();\n\nexport default class Controller {\n    constructor(WrapClass, rootPath = \"/\") {\n        this[_buildHandlers](WrapClass, rootPath);\n    }\n\n    [_buildHandlers](WrapClass, rootPath) {\n        const wrapClass = new WrapClass();\n        let keys = [];\n        let obj = wrapClass;\n        this[_handlers] = [];\n        do {\n            keys = keys.concat(Object.getOwnPropertyNames(obj));\n        } while (obj = Object.getPrototypeOf(obj));\n\n        keys.forEach(key => {\n            let wrap = wrapClass[key].__requestWrapper;\n            if (!(wrap instanceof RequestWrapper)) {\n                return;\n            }\n\n            wrap.setRootPath(rootPath);\n            this[_handlers].push(wrap);\n        });\n    }\n\n    get handlers() {\n        return this[_handlers];\n    }\n}"]}