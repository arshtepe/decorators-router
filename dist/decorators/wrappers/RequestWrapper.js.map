{"version":3,"sources":["../../../src/decorators/wrappers/RequestWrapper.js"],"names":["url","require","_params","Symbol","_callback","wrapCallback","callback","ctx","body","request","undefined","constructor","params","setRootPath","rootPath","value","map","resolve","path","method"],"mappings":";;;;;AAAA,MAAMA,MAAMC,QAAQ,KAAR,CAAZ;AACA,MAAMC,UAAUC,QAAhB;AACA,MAAMC,YAAYD,QAAlB;;AAEA,MAAME,eAAe,UAAUC,QAAV,EAAoB;AACrC,WAAO,gBAAgBC,GAAhB,EAAqB;AACxB,cAAMC,OAAO,MAAMF,SAASC,GAAT,EAAcA,IAAIE,OAAJ,CAAYD,IAA1B,CAAnB,CADwB,CAC2B;;AAEnD,YAAGA,SAASE,SAAZ,EAAuB;AACnBH,gBAAIC,IAAJ,GAAWA,IAAX;AACH;AACJ,KAND;AAOH,CARD;;kBAWe,MAAM;AACjBG,gBAAYC,MAAZ,EAAoBN,QAApB,EAA8B;AAC1B,aAAKJ,OAAL,IAAgBU,MAAhB;AACA,aAAKR,SAAL,IAAkBC,aAAaC,QAAb,CAAlB;AACH;;AAEDO,gBAAYC,QAAZ,EAAsB;AAClB,aAAKZ,OAAL,EAAca,KAAd,GAAsB,KAAKb,OAAL,EAAca,KAAd,CAAoBC,GAApB,CAAwBD,SAASf,IAAIiB,OAAJ,CAAYH,QAAZ,EAAsBC,KAAtB,CAAjC,CAAtB;AACH;;AAGD,QAAIG,IAAJ,GAAW;AACP,eAAO,KAAKhB,OAAL,EAAca,KAArB;AACH;;AAED,QAAII,MAAJ,GAAa;AACT,eAAO,KAAKjB,OAAL,EAAciB,MAArB;AACH;;AAED,QAAIb,QAAJ,GAAe;AACX,eAAO,KAAKF,SAAL,CAAP;AACH;;AArBgB,C","file":"RequestWrapper.js","sourcesContent":["const url = require(\"url\");\nconst _params = Symbol();\nconst _callback = Symbol();\n\nconst wrapCallback = function (callback) {\n    return async function (ctx) {\n        const body = await callback(ctx, ctx.request.body);//TODO add bodyParser\n\n        if(body !== undefined) {\n            ctx.body = body;\n        }\n    };\n};\n\n\nexport default class {\n    constructor(params, callback) {\n        this[_params] = params;\n        this[_callback] = wrapCallback(callback);\n    }\n\n    setRootPath(rootPath) {\n        this[_params].value = this[_params].value.map(value => url.resolve(rootPath, value));\n    }\n\n\n    get path() {\n        return this[_params].value;\n    }\n\n    get method() {\n        return this[_params].method;\n    }\n\n    get callback() {\n        return this[_callback];\n    }\n\n}"]}