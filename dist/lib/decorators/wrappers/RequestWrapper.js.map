{"version":3,"sources":["../../../../src/lib/decorators/wrappers/RequestWrapper.js"],"names":["path","_params","Symbol","_callback","wrapCallback","callback","ctx","next","body","request","query","undefined","constructor","params","setRootPath","rootPath","value","map","join","method"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB;AACA,MAAMC,UAAUC,QAAhB;AACA,MAAMC,YAAYD,QAAlB;;AAEA,MAAME,eAAe,UAAUC,QAAV,EAAoB;AACrC,WAAO,gBAAgBC,GAAhB,EAAqBC,IAArB,EAA2B;AAC9B,cAAMC,OAAO,MAAMH,SAASC,GAAT,EAAcA,IAAIG,OAAJ,CAAYC,KAA1B,CAAnB;;AAEA,YAAGF,SAASG,SAAZ,EAAuB;AACnBL,gBAAIE,IAAJ,GAAWA,IAAX;AACH;AACJ,KAND;AAOH,CARD;;AAWA,eAAe,MAAM;AACjBI,gBAAYC,MAAZ,EAAoBR,QAApB,EAA8B;AAC1B,aAAKJ,OAAL,IAAgBY,MAAhB;AACA,aAAKV,SAAL,IAAkBC,aAAaC,QAAb,CAAlB;AACH;;AAEDS,gBAAYC,QAAZ,EAAsB;AAClB,aAAKd,OAAL,EAAce,KAAd,GAAsB,KAAKf,OAAL,EAAce,KAAd,CAAoBC,GAApB,CAAwBD,SAAShB,KAAKkB,IAAL,CAAUH,QAAV,EAAoBC,KAApB,CAAjC,CAAtB;AACH;;AAGD,QAAIhB,IAAJ,GAAW;AACP,eAAO,KAAKC,OAAL,EAAce,KAArB;AACH;;AAED,QAAIG,MAAJ,GAAa;AACT,eAAO,KAAKlB,OAAL,EAAckB,MAArB;AACH;;AAED,QAAId,QAAJ,GAAe;AACX,eAAO,KAAKF,SAAL,CAAP;AACH;;AArBgB","file":"RequestWrapper.js","sourcesContent":["import path from \"path\";\nconst _params = Symbol();\nconst _callback = Symbol();\n\nconst wrapCallback = function (callback) {\n    return async function (ctx, next) {\n        const body = await callback(ctx, ctx.request.query);\n\n        if(body !== undefined) {\n            ctx.body = body;\n        }\n    };\n};\n\n\nexport default class {\n    constructor(params, callback) {\n        this[_params] = params;\n        this[_callback] = wrapCallback(callback);\n    }\n\n    setRootPath(rootPath) {\n        this[_params].value = this[_params].value.map(value => path.join(rootPath, value));\n    }\n\n\n    get path() {\n        return this[_params].value;\n    }\n\n    get method() {\n        return this[_params].method;\n    }\n\n    get callback() {\n        return this[_callback];\n    }\n\n}"]}